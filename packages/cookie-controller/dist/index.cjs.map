{"version":3,"sources":["../src/index.ts"],"sourcesContent":["import { v4 as uuidv4 } from \"uuid\";\r\n\r\nconst attributes = {\r\n  details: \"data-cookie-details\",\r\n  alert: \"data-cookie-alert\",\r\n  cookieConfig: \"data-cookie-config\",\r\n  action: {\r\n    attribute: \"data-cookie-action\",\r\n    value: {\r\n      dismiss: \"dismiss\",\r\n      accept: \"accept\",\r\n      reject: \"reject\",\r\n      details: \"details\",\r\n      save: \"save\",\r\n    },\r\n  },\r\n};\r\nconst ids = {\r\n  details: \"cookie-details\",\r\n  alert: \"cookie-alert\",\r\n};\r\n\r\nconst cookieController = \"CookieController\";\r\n\r\nexport default class CookieController {\r\n  userOptions: CookieControllerOptionsT = {};\r\n  state: CookieStateT = {\r\n    uuid: \"\",\r\n    interacted: false,\r\n    cookies: {},\r\n  };\r\n\r\n  constructor(options?: CookieControllerOptionsT) {\r\n    if (options) this.userOptions = options;\r\n    this.initalise();\r\n  }\r\n\r\n  // ----------------\r\n  // Private methods\r\n  private initalise() {\r\n    this.state = this.cookieState;\r\n    this.registerEvents();\r\n    this.setStaticAttributes();\r\n    this.setDynamicAttributes();\r\n\r\n    if (!this.state.interacted) {\r\n      this.alertState = true;\r\n    }\r\n\r\n    if (this.state.version && this.options.versioning?.current) {\r\n      if (this.state.version !== this.options.versioning.current) {\r\n        if (this.options.versioning.onNewVersion) {\r\n          this.options.versioning.onNewVersion(\r\n            this.state.version,\r\n            this.options.versioning.current\r\n          );\r\n        }\r\n      }\r\n      this.state.version = this.options.versioning.current;\r\n      this.cookieState = this.state;\r\n    }\r\n\r\n    this.onConsentChange(\"onload\");\r\n  }\r\n  private registerEvents() {\r\n    this.accept = this.accept.bind(this);\r\n    this.dismiss = this.dismiss.bind(this);\r\n    this.reject = this.reject.bind(this);\r\n    this.showDetails = this.showDetails.bind(this);\r\n    this.onSave = this.onSave.bind(this);\r\n    this.onCookieChange = this.onCookieChange.bind(this);\r\n\r\n    this.actionDismiss.forEach((element) =>\r\n      element.addEventListener(\"click\", this.dismiss)\r\n    );\r\n    this.actionAccept.forEach((element) =>\r\n      element.addEventListener(\"click\", this.accept)\r\n    );\r\n    this.actionReject.forEach((element) =>\r\n      element.addEventListener(\"click\", this.reject)\r\n    );\r\n    this.actionDetails.forEach((element) =>\r\n      element.addEventListener(\"click\", this.showDetails)\r\n    );\r\n    this.actionSave.forEach((element) =>\r\n      element.addEventListener(\"click\", this.onSave)\r\n    );\r\n    this.cookieConfig.forEach((element) => {\r\n      element.addEventListener(\"change\", this.onCookieChange);\r\n    });\r\n  }\r\n  private setDynamicAttributes() {\r\n    const detailsState = this.detailsState;\r\n\r\n    this.details?.setAttribute(\"aria-hidden\", detailsState ? \"false\" : \"true\");\r\n    this.alert?.setAttribute(\"aria-hidden\", detailsState ? \"true\" : \"false\");\r\n\r\n    this.actionDetails.forEach((element) => {\r\n      element.setAttribute(\"aria-expanded\", detailsState ? \"true\" : \"false\");\r\n    });\r\n  }\r\n  private setStaticAttributes() {\r\n    if (!this.details?.hasAttribute(\"id\"))\r\n      this.details?.setAttribute(\"id\", ids.details);\r\n    if (!this.alert?.hasAttribute(\"id\"))\r\n      this.alert?.setAttribute(\"id\", ids.alert);\r\n\r\n    const detailId = this.details?.getAttribute(\"id\") as string;\r\n    // const alertId = this.alert?.getAttribute(\"id\") as string;\r\n\r\n    this.details?.setAttribute(\"role\", \"dialog\");\r\n    this.details?.setAttribute(\"aria-modal\", \"true\");\r\n\r\n    this.alert?.setAttribute(\"aria-live\", \"polite\");\r\n    this.alert?.setAttribute(\"role\", \"alert\");\r\n\r\n    this.actionDetails.forEach((element) => {\r\n      element.setAttribute(\"aria-controls\", detailId);\r\n      element.setAttribute(\"aria-haspopup\", \"dialog\");\r\n    });\r\n  }\r\n  private getCookieHelper(key: string) {\r\n    const cookie = document.cookie\r\n      .split(\";\")\r\n      .find((cookie) => cookie.trim().startsWith(`${key}=`));\r\n\r\n    if (cookie) {\r\n      const cookieValue = cookie.split(\"=\")[1];\r\n      return cookieValue;\r\n    }\r\n  }\r\n  private onCookieChange(e: Event) {\r\n    if (this.options.mode !== \"onChange\") return;\r\n\r\n    const target = e.target as HTMLInputElement;\r\n\r\n    const key = target.getAttribute(attributes.cookieConfig) as string;\r\n    if (!key) return;\r\n\r\n    const value = target.checked;\r\n\r\n    this.state.cookies[key] = value;\r\n    this.cookieState = this.state;\r\n\r\n    this.onConsentChange(\"cookie\", {\r\n      key,\r\n      value,\r\n    });\r\n  }\r\n  private onConsentChange(\r\n    type: ConsentChangeT[\"type\"],\r\n    cookie?: {\r\n      key: string;\r\n      value: boolean;\r\n    }\r\n  ) {\r\n    if (this.options.onConsentChange) {\r\n      this.options.onConsentChange({\r\n        type,\r\n        uuid: this.state.uuid,\r\n        version: this.state.version,\r\n        cookies: this.state.cookies,\r\n        cookie,\r\n      });\r\n    }\r\n  }\r\n\r\n  // ----------------\r\n  // Public methods\r\n  destroy() {\r\n    this.actionDismiss.forEach((element) =>\r\n      element.removeEventListener(\"click\", this.dismiss)\r\n    );\r\n    this.actionAccept.forEach((element) =>\r\n      element.removeEventListener(\"click\", this.accept)\r\n    );\r\n    this.actionReject.forEach((element) =>\r\n      element.removeEventListener(\"click\", this.reject)\r\n    );\r\n    this.actionDetails.forEach((element) =>\r\n      element.removeEventListener(\"click\", this.showDetails)\r\n    );\r\n    this.actionSave.forEach((element) =>\r\n      element.removeEventListener(\"click\", this.onSave)\r\n    );\r\n    this.cookieConfig.forEach((element) => {\r\n      element.removeEventListener(\"change\", this.onCookieChange);\r\n    });\r\n  }\r\n  accept() {\r\n    this.rejectAccept(\"accept\");\r\n  }\r\n  reject() {\r\n    this.rejectAccept(\"reject\");\r\n  }\r\n  rejectAccept(mode: \"accept\" | \"reject\" = \"accept\") {\r\n    this.cookieConfig.forEach((element) => {\r\n      const key = element.getAttribute(attributes.cookieConfig) as string;\r\n      this.state.cookies[key] = mode === \"accept\" ? true : false;\r\n    });\r\n\r\n    this.onConsentChange(mode);\r\n    this.dismiss();\r\n  }\r\n  dismiss() {\r\n    this.detailsState = false;\r\n    this.alertState = false;\r\n\r\n    this.state.interacted = true;\r\n    this.cookieState = this.state;\r\n  }\r\n  showDetails() {\r\n    this.cookieConfig.forEach((element) => {\r\n      const key = element.getAttribute(attributes.cookieConfig) as string;\r\n      const value = this.state.cookies[key];\r\n      element.checked = value ? true : false;\r\n    });\r\n\r\n    this.detailsState = !this.detailsState;\r\n    this.state.interacted = true;\r\n    this.cookieState = this.state;\r\n  }\r\n  onSave() {\r\n    this.cookieConfig.forEach((element) => {\r\n      const key = element.getAttribute(attributes.cookieConfig) as string;\r\n      const value = element.checked;\r\n      this.state.cookies[key] = value;\r\n    });\r\n\r\n    this.onConsentChange(\"save\");\r\n    this.dismiss();\r\n  }\r\n  getCookieConsent(key: string) {\r\n    return this.state.cookies[key];\r\n  }\r\n\r\n  // ----------------\r\n  // Error handling\r\n  throwError(message: string) {\r\n    throw new Error(`[CookieController] ${message}`);\r\n  }\r\n\r\n  // ----------------\r\n  // Setters\r\n  set alertState(state: boolean) {\r\n    this.alert?.setAttribute(\"data-cookie-alert\", state ? \"true\" : \"false\");\r\n    this.setDynamicAttributes();\r\n  }\r\n  set detailsState(state: boolean) {\r\n    if (this.alertState) this.alertState = false;\r\n    this.details?.setAttribute(\"data-cookie-details\", state ? \"true\" : \"false\");\r\n    this.setDynamicAttributes();\r\n  }\r\n  set cookieState(state: CookieStateT) {\r\n    if (!state.uuid) state.uuid = uuidv4();\r\n\r\n    const cookieValue = JSON.stringify(state);\r\n    document.cookie = `${cookieController}=${cookieValue};path=/;SameSite=Strict`;\r\n\r\n    this.state = state;\r\n  }\r\n\r\n  // ----------------\r\n  // getters\r\n  get options() {\r\n    return {\r\n      mode: this.actionSave.length > 0 ? \"onSave\" : \"onChange\",\r\n      onConsentChange: this.userOptions.onConsentChange || null,\r\n      versioning: this.userOptions.versioning || null,\r\n    };\r\n  }\r\n  // State\r\n  get alertState() {\r\n    return this.alert?.getAttribute(\"data-cookie-alert\") == \"true\"\r\n      ? true\r\n      : false;\r\n  }\r\n  get detailsState() {\r\n    return this.details?.getAttribute(\"data-cookie-details\") == \"true\"\r\n      ? true\r\n      : false;\r\n  }\r\n  get cookieState() {\r\n    const defaultCookies: Record<string, boolean> = {};\r\n    this.cookieConfig.forEach((element) => {\r\n      const key = element.getAttribute(attributes.cookieConfig) as string;\r\n      defaultCookies[key] = false;\r\n    });\r\n\r\n    try {\r\n      const value = this.getCookieHelper(cookieController);\r\n      if (value) {\r\n        return JSON.parse(value) as CookieStateT;\r\n      }\r\n      return {\r\n        uuid: \"\",\r\n        version: this.options.versioning?.current || undefined,\r\n        interacted: false,\r\n        cookies: defaultCookies,\r\n      };\r\n    } catch (error) {\r\n      return {\r\n        uuid: \"\",\r\n        version: this.options.versioning?.current || undefined,\r\n        interacted: false,\r\n        cookies: defaultCookies,\r\n      };\r\n    }\r\n  }\r\n  // Elements\r\n  get details() {\r\n    return document.querySelector(`[${attributes.details}]`);\r\n  }\r\n  get alert() {\r\n    return document.querySelector(`[${attributes.alert}]`);\r\n  }\r\n  get cookieConfig() {\r\n    const eles = document.querySelectorAll(\r\n      `[${attributes.cookieConfig}]`\r\n    ) as NodeListOf<HTMLElement>;\r\n    return Array.from(eles).filter(\r\n      (ele) => ele.getAttribute(\"type\") === \"checkbox\"\r\n    ) as HTMLInputElement[];\r\n  }\r\n  get actionDismiss() {\r\n    return document.querySelectorAll(\r\n      `[${attributes.action.attribute}=\"${attributes.action.value.dismiss}\"]`\r\n    );\r\n  }\r\n  get actionAccept() {\r\n    return document.querySelectorAll(\r\n      `[${attributes.action.attribute}=\"${attributes.action.value.accept}\"]`\r\n    );\r\n  }\r\n  get actionReject() {\r\n    return document.querySelectorAll(\r\n      `[${attributes.action.attribute}=\"${attributes.action.value.reject}\"]`\r\n    );\r\n  }\r\n  get actionDetails() {\r\n    return document.querySelectorAll(\r\n      `[${attributes.action.attribute}=\"${attributes.action.value.details}\"]`\r\n    );\r\n  }\r\n  get actionSave() {\r\n    return document.querySelectorAll(\r\n      `[${attributes.action.attribute}=\"${attributes.action.value.save}\"]`\r\n    );\r\n  }\r\n}\r\n\r\n// ----------------\r\n// Types\r\n\r\ninterface CookieControllerOptionsT {\r\n  onConsentChange?: (data: ConsentChangeT) => void;\r\n  versioning?: {\r\n    current: string;\r\n    onNewVersion?: (oldVersion: string, newVersion: string) => void;\r\n  };\r\n}\r\ninterface ConsentChangeT {\r\n  type: \"cookie\" | \"accept\" | \"reject\" | \"save\" | \"onload\";\r\n  uuid: string;\r\n  version?: string;\r\n\r\n  cookie?: {\r\n    key: string;\r\n    value: boolean;\r\n  };\r\n  cookies: Record<string, boolean>;\r\n}\r\n\r\ninterface CookieStateT {\r\n  uuid: string;\r\n  version?: string;\r\n  interacted: boolean;\r\n  cookies: Record<string, boolean>;\r\n}\r\n"],"mappings":"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","names":["cookie","uuidv4"]}